---
import FloatBtns from '@hdud/common/components/FloatBtns.astro';
import PageLayout from '@/layouts/PageLayout.astro';
import MemberGrid from '@/components/index/AllImageGrid.tsx'
import { getCollection } from "astro:content";
import { getI18n } from "@/i18n/index"
import { getRelativeLocaleUrl } from 'astro:i18n';
import { siteConfig } from '@/site.config';

const { currentLocale } = Astro
const i18n = await getI18n(currentLocale, 'design')

const imageInfo = await getCollection('imageInfo');
const members = imageInfo.reduce((ans, item) => {
  return [
    ...ans,
    ...Object.entries(item.data).map(([it, info]) => {
      const [width, height] = info as [number, number];
      return { name: `${item.id}/${it}`, width, height };
    })
  ];
}, [] as { name: string; width: number; height: number }[]).sort(() => Math.random() - 0.5);
const mates = {
  title: i18n('menus.all'),
	description: i18n('mate.description'),
	author: siteConfig.author,
	email: siteConfig.email,
	local: currentLocale,
  ogImage: getRelativeLocaleUrl(currentLocale ?? 'en', '/og-image/site-image.png'),
}
---
<PageLayout {...mates}>
  <MemberGrid members={members} client:load />
  <FloatBtns btns={[{
    type: 'theme',
    props: { themes: siteConfig.themes }
  }, {
    type: 'top',
  }]} />
</PageLayout>
