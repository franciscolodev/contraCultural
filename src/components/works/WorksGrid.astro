---
import type { CollectionEntry } from "astro:content";
import Image from '@/components/common/Image';

type WorkData = {
  base: string;
  members: {
    main: [number, number];
    [key: string]: any;
  };
  desc?: string;
  [key: string]: any;
};

type Props = {
  works: Array<CollectionEntry<"works"> & { data: WorkData }>;
};

const { works } = Astro.props;
---

<div class="gap-1 columns-2 sm:columns-3 xl:columns-4">
  {works.map((work) => <a
    href={`/${work.id}`}
    class="group block overflow-hidden mb-1 shadow-xl relative"
  >
    <Image
      client:load
      src={`${work.data.base}/main`}
      imageInfo={{ width: work.data.members.main[0], height: work.data.members.main[1] }}
      classNames={{
        img: "transition duration-300 ease-in-out hover:scale-108",
      }}
    />
    <span class:list={[
      "text-sm md:text-base text-white absolute overflow-hidden",
      "py-1 px-2 z-10 w-full bg-black/40 backdrop-blur truncate",
      "group-hover:animate-works-label-slide-in",
    ]}>
      {work.data.desc || work.id}
    </span>
  </a>)}
</div>
